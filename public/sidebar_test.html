<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidebar Test</title>
    <link href="http://localhost:8000/assets/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="http://localhost:8000/assets/css/sidebar.css" rel="stylesheet">
    <style>
        body { margin: 0; font-family: Arial, sans-serif; }
        .student-dashboard { display: flex; min-height: 100vh; transition: margin-left 0.3s ease; }
        .student-dashboard.sidebar-collapsed { margin-left: 0; }
        .sidebar { width: 250px; background: #343a40; color: white; transition: transform 0.3s ease; }
        .sidebar.collapsed { transform: translateX(-100%); }
        .main-content { flex: 1; padding: 20px; }
        .topbar { background: #fff; padding: 10px 20px; border-bottom: 1px solid #dee2e6; }
    </style>
</head>
<body>
    <div class="student-dashboard" id="dashboard">
        <!-- Topbar -->
        <div class="topbar">
            <button id="sidebarToggle" class="btn btn-outline-secondary">
                <i class="bi bi-list"></i> Menu
            </button>
        </div>

        <!-- Sidebar -->
        <div class="sidebar" id="studentSidebar">
            <div class="p-3">
                <h5>Sidebar Test</h5>
                <p>Questa Ã¨ una sidebar di test</p>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <h1>Sidebar Collapse Test</h1>
            <p>Clicca sul pulsante "Menu" per testare il collapse della sidebar.</p>
            <div id="status">Status: Sidebar espansa</div>
        </div>
    </div>

    <script>
    // Sidebar toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
        const sidebarToggle = document.getElementById('sidebarToggle');
        const dashboard = document.querySelector('.student-dashboard');
        const sidebar = document.getElementById('studentSidebar');
        const statusDiv = document.getElementById('status');

        console.log('Elements found:', {
            sidebarToggle: !!sidebarToggle,
            dashboard: !!dashboard,
            sidebar: !!sidebar,
            statusDiv: !!statusDiv
        });

        if (sidebarToggle && dashboard && sidebar) {
            console.log('Attaching event listeners...');

            // Sidebar toggle functionality
            sidebarToggle.addEventListener('click', function() {
                console.log('Toggle button clicked');
                dashboard.classList.toggle('sidebar-collapsed');
                sidebar.classList.toggle('collapsed');

                const isCollapsed = dashboard.classList.contains('sidebar-collapsed');
                statusDiv.textContent = isCollapsed ? 'Status: Sidebar collassata' : 'Status: Sidebar espansa';

                // Save state to localStorage (only for desktop)
                if (window.innerWidth >= 768) {
                    localStorage.setItem('studentSidebarCollapsed', isCollapsed);
                    console.log('State saved to localStorage:', isCollapsed);
                }
            });

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', function(event) {
                if (window.innerWidth < 768 &&
                    !sidebar.contains(event.target) &&
                    !sidebarToggle.contains(event.target) &&
                    !dashboard.classList.contains('sidebar-collapsed')) {
                    dashboard.classList.add('sidebar-collapsed');
                    sidebar.classList.add('collapsed');
                    statusDiv.textContent = 'Status: Sidebar collassata (auto-close mobile)';
                }
            });

            // Load sidebar state on page load
            // On mobile, always start collapsed
            if (window.innerWidth < 768) {
                dashboard.classList.add('sidebar-collapsed');
                sidebar.classList.add('collapsed');
                statusDiv.textContent = 'Status: Sidebar collassata (mobile)';
                console.log('Mobile: sidebar collapsed by default');
            } else {
                // On desktop, load from localStorage
                const isCollapsed = localStorage.getItem('studentSidebarCollapsed') === 'true';
                if (isCollapsed) {
                    dashboard.classList.add('sidebar-collapsed');
                    sidebar.classList.add('collapsed');
                    statusDiv.textContent = 'Status: Sidebar collassata (da localStorage)';
                    console.log('Desktop: loaded collapsed state from localStorage');
                } else {
                    console.log('Desktop: sidebar expanded by default');
                }
            }

            // Handle window resize
            window.addEventListener('resize', function() {
                console.log('Window resized, width:', window.innerWidth);
                if (window.innerWidth < 768) {
                    // On mobile, ensure collapsed state
                    dashboard.classList.add('sidebar-collapsed');
                    sidebar.classList.add('collapsed');
                    statusDiv.textContent = 'Status: Sidebar collassata (resize mobile)';
                } else {
                    // On desktop, respect saved state
                    const isCollapsed = localStorage.getItem('studentSidebarCollapsed') === 'true';
                    if (isCollapsed) {
                        dashboard.classList.add('sidebar-collapsed');
                        sidebar.classList.add('collapsed');
                        statusDiv.textContent = 'Status: Sidebar collassata (resize desktop)';
                    } else {
                        dashboard.classList.remove('sidebar-collapsed');
                        sidebar.classList.remove('collapsed');
                        statusDiv.textContent = 'Status: Sidebar espansa (resize desktop)';
                    }
                }
            });

            console.log('Event listeners attached successfully');
        } else {
            console.error('Some required elements not found!');
            statusDiv.textContent = 'ERRORE: Elementi DOM mancanti';
        }
    });
    </script>
</body>
</html></content>
<parameter name="filePath">/Users/carminecavaliere/Desktop/sidebar_test.html